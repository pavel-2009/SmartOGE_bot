# üéì SmartOGE ‚Äî Telegram-–±–æ—Ç –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –û–ì–≠

> –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —à–∫–æ–ª—å–Ω–∏–∫–∞–º –≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –û–ì–≠ —á–µ—Ä–µ–∑ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã, —Ä–µ–π—Ç–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìò –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º —á–µ—Ä–µ–∑ OpenRouter AI  
- üß† –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫  
- üìä –ì—Ä–∞—Ñ–∏–∫–∏ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é `matplotlib`  
- üèÜ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- ‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è  
- üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ SQLite  

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|------------|--------------|
| Telegram Bot API | [Aiogram 3.x](https://docs.aiogram.dev/en/latest/) |
| –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã | `aiohttp` |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | `SQLite3` |
| –ì—Ä–∞—Ñ–∏–∫–∏ | `matplotlib`, `pandas` |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | `python-dotenv` |
| –Ø–ü –∏ —Å—Ä–µ–¥–∞ | Python 3.10+ |

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
git clone https://github.com/yourusername/SmartOGE.git
cd SmartOGE
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`
–°–æ–∑–¥–∞–π –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ñ–∞–π–ª `.env`:
```
BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
OPENROUTER_API_KEY=—Ç–≤–æ–π_API_–∫–ª—é—á_OpenRouter
```

> üîë –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å OpenRouter API-–∫–ª—é—á ‚Äî –∑–∞–π–¥–∏ –Ω–∞ [https://openrouter.ai/settings/keys](https://openrouter.ai/settings/keys) –∏ —Å–∫–æ–ø–∏—Ä—É–π —Å–≤–æ–π –∫–ª—é—á.

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python bot.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—á–Ω—ë—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å Telegram-API.

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
SmartOGE/
‚îú‚îÄ‚îÄ bot.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ .env                     # –¢–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ db.py                # –†–∞–±–æ—Ç–∞ —Å SQLite
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ utils.py             # OpenRouter –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ bot_handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start.py             # –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
‚îÇ   ‚îú‚îÄ‚îÄ quiz.py              # –í–∏–∫—Ç–æ—Ä–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ stats.py             # –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ raiting.py           # –†–µ–π—Ç–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ start.py         # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ       ‚îú‚îÄ‚îÄ stats.py         # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
‚îÇ       ‚îî‚îÄ‚îÄ settings.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îî‚îÄ‚îÄ middlewares.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤

–ë–æ—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ **OpenRouter API** (–º–æ–¥–µ–ª—å `mistralai/mixtral-8x7b-instruct`), –ø–µ—Ä–µ–¥–∞—ë—Ç –∑–∞–ø—Ä–æ—Å –≤–∏–¥–∞:

```
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 10 —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –û–ì–≠ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞" —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ "–ë–∞–∑–æ–≤—ã–π"
```

–∏ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫:
```python
[
  ["–í–æ–ø—Ä–æ—Å 1", {"A": "...", "B": "...", "C": "...", "D": "..."}, "B", "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ"],
  ...
]
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∞ –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

---

## üßë‚Äçüíª –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/stats`)
- –°–º–æ—Ç—Ä–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –£–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–ø—Ä–µ–¥–º–µ—Ç—ã, –¥–æ—Å—Ç—É–ø)

–î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä `IsAdmin()` –∏ middleware `IsAdminMiddleware`.

---

## üßæ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|----------|
| `401 User not found` –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | –£–±–µ–¥–∏—Å—å, —á—Ç–æ API-–∫–ª—é—á –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å `Bearer` |
| `UNIQUE constraint failed` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `update_raiting()` |
| `/start` –∏–Ω–æ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | –ü—Ä–æ–≤–µ—Ä—å —Ñ–∏–ª—å—Ç—Ä `IsAdmin()` –∏ –ø–æ—Ä—è–¥–æ–∫ —Ä–æ—É—Ç–µ—Ä–æ–≤ |
| PNG-—Ñ–∞–π–ª—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è | –î–æ–±–∞–≤—å `os.remove(image_path)` –ø–æ—Å–ª–µ `send_photo` |

---

## üì¶ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python ‚â• 3.10  
- Aiogram ‚â• 3.4  
- Matplotlib ‚â• 3.7  
- Aiohttp ‚â• 3.9  

---

## üí¨ –ê–≤—Ç–æ—Ä

**Pavel 2009**  
üóìÔ∏è –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ —É—á–µ–±–Ω—ã–π ‚Äî –ø–µ—Ä–≤—ã–π –±–æ—Ç –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

---

## üèÅ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ¬© 2025 ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.
